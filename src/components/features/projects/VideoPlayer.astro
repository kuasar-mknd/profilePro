---
import { YouTube } from "astro-embed";

const { videoUrl } = Astro.props;

// Extract video ID if it's a full URL, otherwise assume it's an ID
const getVideoId = (url) => {
  if (!url) return null;
  const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;
  const match = url.match(regExp);
  return match && match[2].length === 11 ? match[2] : url;
};

const videoId = getVideoId(videoUrl);
---

<div class="w-full aspect-video">
  {
    videoId && (
      <YouTube
        id={videoId}
        class="w-full h-full rounded-xl shadow-xl max-w-none mx-0"
      />
    )
  }
</div>
