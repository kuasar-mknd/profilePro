---
import { sanitizeUrl } from "../../utils/security";

const { tag, variant = "default", href } = Astro.props;
const isDark = variant === "dark";
const safeHref = href ? sanitizeUrl(href) : undefined;
const Element = safeHref ? "a" : "span";
const ariaLabel = safeHref ? `Voir les projets avec le tag ${tag}` : undefined;
---

{
  tag && (
    <Element
      href={safeHref || undefined}
      aria-label={ariaLabel}
      title={ariaLabel}
      class:list={[
        "text-[14px] leading-none rounded-full flex flex-row content-center items-center h-[28px] px-3 font-medium backdrop-blur-sm",
        isDark
          ? "bg-white/20 border border-white/40 text-white drop-shadow-[0_1px_2px_rgba(0,0,0,0.8)]"
          : "bg-transparent border-pacamara-secondary border text-pacamara-secondary",
        safeHref &&
          "hover:scale-105 focus-visible:scale-105 active:scale-95 hover:bg-pacamara-accent hover:text-white hover:border-pacamara-accent transition-all duration-300 relative z-20 cursor-pointer focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-pacamara-accent focus-visible:ring-offset-2",
      ]}
      style="contain: layout style;"
    >
      <span>{tag}</span>
    </Element>
  )
}
