---
/**
 * Skeleton loading component for content placeholders.
 * Provides shimmer animation while content loads.
 */
interface Props {
  width?: string;
  height?: string;
  rounded?: "none" | "sm" | "md" | "lg" | "full";
  class?: string;
}

const {
  width = "100%",
  height = "1rem",
  rounded = "md",
  class: className = "",
} = Astro.props;

const roundedClasses = {
  none: "",
  sm: "rounded",
  md: "rounded-lg",
  lg: "rounded-xl",
  full: "rounded-full",
};
---

<div
  class:list={["skeleton", roundedClasses[rounded], className]}
  style={`width: ${width}; height: ${height};`}
  role="status"
  aria-hidden="true"
>
</div>

<style>
  .skeleton {
    /* ⚡ Bolt: Performance optimization
       - Use GPU-accelerated transform instead of background-position
       - Avoid layout thrashing on every frame
    */
    position: relative;
    overflow: hidden;
    background-color: var(--color-pacamara-primary, #1a1a2e); /* Fallback */
    /* Use a slightly lighter/darker base depending on theme via opacity */
    background: rgba(26, 26, 46, 0.5); /* Default base */
  }

  :global(.dark) .skeleton {
    background: rgba(255, 255, 255, 0.05);
  }

  .skeleton::after {
    content: "";
    position: absolute;
    inset: 0;
    transform: translateX(-100%);
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.05) 20%,
      rgba(255, 255, 255, 0.1) 60%,
      transparent 100%
    );
    animation: skeleton-shimmer 1.5s infinite;
    /* ⚡ Bolt: Promotes to compositor layer */
    will-change: transform;
  }

  :global(.dark) .skeleton::after {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 255, 255, 0.05) 20%,
      rgba(255, 255, 255, 0.1) 60%,
      transparent 100%
    );
  }

  @keyframes skeleton-shimmer {
    100% {
      transform: translateX(100%);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .skeleton::after {
      animation: none;
      background: none;
    }
    .skeleton {
      background: rgba(255, 255, 255, 0.1);
    }
  }
</style>
