## 2024-07-25 - Harden Client-Side Sanitization
**Vulnerability:** The custom client-side sanitization function in `src/components/common/ContactForm.astro` did not escape backticks (`` ` ``) or equals signs (`=`).
**Learning:** This is a defense-in-depth issue. While the application's strict Content Security Policy (CSP) is the primary defense against XSS, this sanitization function is the last line of defense before data is sent to a third-party service. Unescaped characters could be exploited in other contexts where the data is viewed, such as an email client or an admin dashboard, if those systems have their own vulnerabilities. Relying solely on one layer of defense (like CSP) is fragile.
**Prevention:** Custom sanitization functions must be comprehensive. When not using a vetted library, the default should be to escape a broad range of characters with special meaning in HTML, CSS, and JavaScript contexts (`<`, `>`, `&`, `"`, `'`, `/`, `\``, `=`). This ensures the data is inert, providing stronger protection regardless of how it's rendered downstream.