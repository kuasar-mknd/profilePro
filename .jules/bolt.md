## 2024-05-23 - Global MutationObserver Overhead
**Learning:** A global `MutationObserver` on `document.body` with `subtree: true` is a significant performance anti-pattern. It fires callbacks for *every* DOM modification (attributes, child additions/removals) across the entire page, including animations and interactive elements.
**Action:** Replace broad `MutationObserver` usage with targeted event listeners (like `astro:page-load`, `astro:after-swap`) and manual handling in the specific components that inject dynamic content (e.g., `Footer.astro`). This moves the cost from O(n) on every DOM change to O(1) at specific lifecycle moments.
